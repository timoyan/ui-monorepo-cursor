import{proxyCustomElement as t,HTMLElement as e,createEvent as i,h as s,transformTag as r}from"@stencil/core/internal/client";export{getAssetPath,render,setAssetPath,setNonce,setPlatformOptions}from"@stencil/core/internal/client";const c=()=>`.credit-card-form.sc-credit-card-form{display:block;width:100%}.adyen-container.sc-credit-card-form{width:100%;min-height:200px}.adyen-container.disabled.sc-credit-card-form{opacity:0.6;pointer-events:none}.error-message.sc-credit-card-form{margin-top:12px;padding:12px;background-color:#fee;border:1px solid #fcc;border-radius:4px;color:#c33;font-size:14px}.credit-card-form.sc-credit-card-form .sc-credit-card-form:global(.adyen-checkout__input){font-family:inherit}.credit-card-form.sc-credit-card-form .sc-credit-card-form:global(.adyen-checkout__input--error){border-color:#c33}`;const o=t(class t extends e{constructor(t){super();if(t!==false){this.__registerHost()}this.formReady=i(this,"formReady",7);this.formChange=i(this,"formChange",7);this.formSubmit=i(this,"formSubmit",7);this.formError=i(this,"formError",7);this.disabled=false;this.isReady=false;this.isValid=false;this.errorMessage="";this.adyenCheckout=null;this.cardComponent=null;this.containerId=`adyen-card-container-${Math.random().toString(36).substr(2,9)}`}async componentDidLoad(){await this.initializeAdyen()}async disconnectedCallback(){if(this.cardComponent?.unmount){this.cardComponent.unmount()}}async initializeAdyen(){try{if(typeof window==="undefined"){return}if(!window.AdyenCheckout){const t=document.createElement("script");t.src=`https://checkoutshopper-${this.adyenConfig.environment==="live"?"live":"test"}.adyen.com/checkoutshopper/sdk/5.x/adyen.js`;t.async=true;t.onload=()=>this.createAdyenCheckout();document.head.appendChild(t)}else{await this.createAdyenCheckout()}}catch(t){this.handleError("Failed to initialize Adyen",t)}}async createAdyenCheckout(){try{const t=window.AdyenCheckout;if(!t){throw new Error("AdyenCheckout is not available")}this.adyenCheckout=await t({environment:this.adyenConfig.environment,clientKey:this.adyenConfig.clientKey,locale:this.adyenConfig.locale||"en-US",onSubmit:(t,e)=>{if(this.adyenConfig.onSubmit){this.adyenConfig.onSubmit(t,e)}this.handleSubmit(t)},onError:(t,e)=>{if(this.adyenConfig.onError){this.adyenConfig.onError(t,e)}this.handleError("Payment error",t)},onChange:(t,e)=>{if(this.adyenConfig.onChange){this.adyenConfig.onChange(t,e)}this.handleChange(t)}});const e=this.el.querySelector(`#${this.containerId}`);if(e&&this.adyenCheckout){const t=this.adyenCheckout;this.cardComponent=t.create("card",{showPayButton:this.adyenConfig.showPayButton??false,placeholder:this.placeholder||{},onChange:t=>{const e=t;this.isValid=e.isValid;if(e.isValid){this.errorMessage=""}}});if(this.cardComponent?.mount){this.cardComponent.mount(`#${this.containerId}`)}this.isReady=true;this.formReady.emit()}}catch(t){this.handleError("Failed to create Adyen checkout",t)}}handleSubmit(t){const e=t;if(e.isValid){const t=e.data?.paymentMethod;const i={cardNumber:t?.encryptedCardNumber||"",expiryDate:t?.encryptedExpiryDate||"",cvc:t?.encryptedSecurityCode||"",holderName:t?.holderName||""};this.formSubmit.emit(i)}}handleChange(t){const e=t;if(e.isValid){const t=e.data?.paymentMethod;const i={cardNumber:t?.encryptedCardNumber||"",expiryDate:t?.encryptedExpiryDate||"",cvc:t?.encryptedSecurityCode||"",holderName:t?.holderName||""};this.formChange.emit(i)}}handleError(t,e){this.errorMessage=t;this.formError.emit({message:t,error:e})}render(){return s("div",{key:"3e0a744d0192dadfb4a137a10bf7ffe69296cf87",class:"credit-card-form"},s("div",{key:"eb0bc4a4d98652d983fa4e2472df63442480cde3",id:this.containerId,class:`adyen-container ${this.disabled?"disabled":""}`}),this.errorMessage&&s("div",{key:"d53742060dcfac8015d44af5b5e6682da021037b",class:"error-message",role:"alert"},this.errorMessage))}get el(){return this}static get style(){return c()}},[2,"credit-card-form",{adyenConfig:[16],placeholder:[16],disabled:[4],isReady:[32],isValid:[32],errorMessage:[32]}]);function a(){if(typeof customElements==="undefined"){return}const t=["credit-card-form"];t.forEach((t=>{switch(t){case"credit-card-form":if(!customElements.get(r(t))){customElements.define(r(t),o)}break}}))}a();export{o as CreditCardForm,a as defineCustomElement};
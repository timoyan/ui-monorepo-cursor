# Monorepo å·¥å…·é¸æ“‡æŒ‡å—

## ç•¶å‰å·¥å…·éˆ

### âœ… å·²ä½¿ç”¨çš„å·¥å…·

1. **pnpm workspaces** - Monorepo åŸºç¤è¨­æ–½
   - ä¾è³´ç®¡ç†
   - å·¥ä½œå€ç®¡ç†
   - æœ¬åœ°åŒ…é€£çµ

2. **pnpm version/publish** - ç‰ˆæœ¬ç®¡ç†å’Œç™¼ä½ˆ
   - ç‰ˆæœ¬è™Ÿç®¡ç†
   - åŒ…ç™¼ä½ˆ

3. **Changesetsï¼ˆå¯é¸ï¼‰** - è®Šæ›´ç®¡ç†å’Œè®Šæ›´æ—¥èªŒ
   - è®Šæ›´è¿½è¹¤
   - è‡ªå‹•è®Šæ›´æ—¥èªŒç”Ÿæˆ

## ä¸éœ€è¦çš„å·¥å…·

### âŒ Lerna

**ç‚ºä»€éº¼ä¸éœ€è¦ Lernaï¼Ÿ**

1. **åŠŸèƒ½é‡ç–Š**
   - pnpm workspaces å·²ç¶“æä¾› monorepo åŸºç¤åŠŸèƒ½
   - pnpm å…§å»ºç‰ˆæœ¬ç®¡ç†å’Œç™¼ä½ˆåŠŸèƒ½
   - Changesets æä¾›è®Šæ›´ç®¡ç†ï¼ˆå¦‚æœéœ€è¦çš„è©±ï¼‰

2. **ç¾ä»£æ›¿ä»£æ–¹æ¡ˆ**
   - **pnpm workspaces** æ›¿ä»£ Lerna çš„ monorepo ç®¡ç†
   - **Changesets** æ›¿ä»£ Lerna çš„ç‰ˆæœ¬ç®¡ç†
   - **pnpm version/publish** æ›¿ä»£ Lerna çš„ç™¼ä½ˆåŠŸèƒ½

3. **è¤‡é›œåº¦**
   - Lerna å¢åŠ é¡å¤–çš„è¤‡é›œåº¦
   - éœ€è¦é¡å¤–çš„é…ç½®æ–‡ä»¶
   - å­¸ç¿’æˆæœ¬æ›´é«˜

4. **ç¶­è­·ç‹€æ…‹**
   - Lerna å·²ç¶“è¢« Nx æ”¶è³¼ï¼Œç™¼å±•æ–¹å‘ä¸ç¢ºå®š
   - ç¤¾ç¾¤æ›´å‚¾å‘æ–¼ä½¿ç”¨ç¾ä»£å·¥å…·éˆ

## å·¥å…·å°æ¯”

| åŠŸèƒ½ | Lerna | pnpm + Changesets | ç•¶å‰æ–¹æ¡ˆ |
|------|-------|-------------------|----------|
| Monorepo ç®¡ç† | âœ… | âœ… (pnpm workspaces) | âœ… |
| ä¾è³´ç®¡ç† | âš ï¸ (éœ€é…åˆ npm/yarn) | âœ… (pnpm) | âœ… |
| ç‰ˆæœ¬ç®¡ç† | âœ… | âœ… (Changesets) | âœ… (pnpm version) |
| è®Šæ›´æ—¥èªŒ | âœ… | âœ… (Changesets) | âš ï¸ (æ‰‹å‹•) |
| ç™¼ä½ˆ | âœ… | âœ… (pnpm publish) | âœ… |
| å­¸ç¿’æ›²ç·š | ä¸­ | ä½ | ä½ |
| é…ç½®è¤‡é›œåº¦ | é«˜ | ä¸­ | ä½ |

## æ¨è–¦å·¥å…·éˆ

### æ–¹æ¡ˆ Aï¼šç°¡å–®å°ˆæ¡ˆï¼ˆç•¶å‰æ¨è–¦ï¼‰

```
pnpm workspaces
  â”œâ”€ ä¾è³´ç®¡ç†
  â”œâ”€ å·¥ä½œå€ç®¡ç†
  â””â”€ ç‰ˆæœ¬ç®¡ç†ï¼ˆpnpm versionï¼‰
      â””â”€ ç™¼ä½ˆï¼ˆpnpm publishï¼‰
```

**å„ªé»ï¼š**
- ç°¡å–®ç›´æ¥
- ç„¡éœ€é¡å¤–å·¥å…·
- å­¸ç¿’æˆæœ¬ä½

### æ–¹æ¡ˆ Bï¼šåœ˜éšŠå”ä½œï¼ˆæœªä¾†å¯é¸ï¼‰

```
pnpm workspaces
  â”œâ”€ ä¾è³´ç®¡ç†
  â”œâ”€ å·¥ä½œå€ç®¡ç†
  â””â”€ Changesets
      â”œâ”€ è®Šæ›´ç®¡ç†
      â”œâ”€ ç‰ˆæœ¬ç®¡ç†
      â””â”€ è®Šæ›´æ—¥èªŒç”Ÿæˆ
```

**å„ªé»ï¼š**
- è‡ªå‹•è®Šæ›´æ—¥èªŒ
- æ›´å¥½çš„è®Šæ›´è¿½è¹¤
- é©åˆåœ˜éšŠå”ä½œ

### æ–¹æ¡ˆ Cï¼šå¤§å‹å°ˆæ¡ˆï¼ˆä¸æ¨è–¦ç”¨æ–¼ç•¶å‰å°ˆæ¡ˆï¼‰

```
pnpm workspaces
  â”œâ”€ ä¾è³´ç®¡ç†
  â”œâ”€ å·¥ä½œå€ç®¡ç†
  â””â”€ Lerna
      â”œâ”€ ç‰ˆæœ¬ç®¡ç†
      â”œâ”€ ç™¼ä½ˆ
      â””â”€ è®Šæ›´æ—¥èªŒ
```

**ç¼ºé»ï¼š**
- è¤‡é›œåº¦é«˜
- é…ç½®ç¹ç‘£
- ç¶­è­·æˆæœ¬é«˜

## çµè«–

### âœ… ç•¶å‰å°ˆæ¡ˆä¸éœ€è¦ Lerna

**åŸå› ï¼š**
1. pnpm workspaces å·²ç¶“æä¾›æ‰€æœ‰å¿…è¦çš„ monorepo åŠŸèƒ½
2. pnpm å…§å»ºçš„ç‰ˆæœ¬ç®¡ç†è¶³å¤ ä½¿ç”¨
3. å¦‚æœæœªä¾†éœ€è¦ï¼ŒChangesets æ˜¯æ›´å¥½çš„é¸æ“‡
4. Lerna æœƒå¢åŠ ä¸å¿…è¦çš„è¤‡é›œåº¦

### ğŸ“‹ å»ºè­°çš„å·¥å…·æ¼”é€²è·¯å¾‘

```
éšæ®µ 1ï¼ˆç¾åœ¨ï¼‰:
  pnpm workspaces + pnpm version/publish
  â†“
éšæ®µ 2ï¼ˆæœªä¾†ï¼Œå¦‚æœéœ€è¦ï¼‰:
  pnpm workspaces + Changesets
  â†“
éšæ®µ 3ï¼ˆå¤§å‹å°ˆæ¡ˆï¼Œä¸é©ç”¨æ–¼ç•¶å‰ï¼‰:
  pnpm workspaces + Lernaï¼ˆä¸æ¨è–¦ï¼‰
```

## åƒè€ƒè³‡æ–™

- [pnpm workspaces](https://pnpm.io/workspaces)
- [Changesets](https://github.com/changesets/changesets)
- [Lerna](https://lerna.js.org/) - ä¸æ¨è–¦ç”¨æ–¼ç•¶å‰å°ˆæ¡ˆ
- [Modern Monorepo Tools Comparison](https://monorepo.tools/)

